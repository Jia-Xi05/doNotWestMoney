<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MLB æ¨¡æ“¬ä¸‹æ³¨ç³»çµ±</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-gray-100 font-sans p-6">
  <!-- é é¦– -->
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-bold">MLB æ¨¡æ“¬ä¸‹æ³¨ï¼ˆæ”¯æ´ä¸²é—œ & ç´€éŒ„å„²å­˜ï¼‰</h1>
  </header>

  <!-- ä¸»å€å¡Šï¼šæœ¬é‡‘ã€ä¸‹æ³¨ã€çµæœ -->
  <div class="max-w-4xl mx-auto grid grid-cols-3 gap-8">
    <!-- å·¦å´ -->
    <div class="col-span-2 space-y-6">
      <!-- æœ¬é‡‘è¨­å®š -->
      <div class="bg-gray-800 p-6 rounded-2xl shadow-lg">
        <label class="block mb-2">æœ¬é‡‘ï¼ˆBankrollï¼‰</label>
        <input id="bankrollInput" type="number" min="0" step="0.01" class="w-full p-2 rounded-lg bg-gray-700 border border-gray-600" placeholder="è¼¸å…¥æœ¬é‡‘">
        <button id="setBankrollBtn" class="mt-4 w-full py-2 rounded-xl text-white bg-yellow-500 hover:bg-yellow-600 transition">å­˜å…¥æœ¬é‡‘</button>
      </div>
      <!-- ä¸‹æ³¨è¡¨å–® -->
      <div id="betForm" class="bg-gray-800 p-6 rounded-2xl shadow-lg space-y-4 opacity-50 pointer-events-none">
        <div>
          <label>ä¸‹æ³¨éšŠä¼</label>
          <select id="teamSelect" class="w-full p-2 rounded-lg bg-gray-700 border border-gray-600"></select>
        </div>
        <div>
          <label>è³ ç‡ï¼ˆå°æ•¸ï¼‰</label>
          <input id="oddsInput" type="number" min="1" step="0.01" class="w-full p-2 rounded-lg bg-gray-700 border border-gray-600" placeholder="å¦‚ 1.20ã€2.50">
        </div>
        <div class="flex space-x-2">
          <button id="addParlayBtn" class="flex-1 py-2 rounded-xl text-white bg-blue-500 hover:bg-blue-600 transition">åŠ å…¥ä¸²é—œ</button>
          <button id="clearParlayBtn" class="flex-1 py-2 rounded-xl text-white bg-red-500 hover:bg-red-600 transition">æ¸…é™¤ä¸²é—œ</button>
        </div>
        <div>
          <label>ä¸²é—œæ˜ç´°</label>
          <ul id="parlayList" class="list-disc list-inside max-h-32 overflow-auto text-sm"></ul>
          <div class="mt-2">ç¸½è³ ç‡ï¼š<span id="totalOdds">0.00</span></div>
        </div>
        <div>
          <label>ä¸‹æ³¨é‡‘é¡</label>
          <input id="betAmountInput" type="number" class="w-full p-2 rounded-lg bg-gray-700 border border-gray-600" placeholder="ä¸å¾—è¶…éæœ¬é‡‘">
        </div>
        <button id="placeBetBtn" class="mt-4 w-full py-2 rounded-xl text-white bg-yellow-500 hover:bg-yellow-600 transition">æäº¤ä¸‹æ³¨</button>
      </div>
    </div>
    <!-- å³å´ï¼šçµæœé¡¯ç¤º -->
    <div class="bg-gray-800 p-6 rounded-2xl shadow-lg flex flex-col items-center justify-center">
      <div id="resultStatus" class="text-lg mb-4">å°šæœªé–‹å§‹</div>
      <div>å‰©é¤˜æœ¬é‡‘ï¼š<span id="bankrollDisplay">0.00</span></div>
    </div>
  </div>

  <!-- åˆ†é å°èˆª -->
  <div class="max-w-4xl mx-auto mt-8">
    <nav class="flex space-x-4 border-b border-gray-700">
      <button id="tabPending" class="py-2 px-4 -mb-px font-medium border-b-2 border-yellow-500">ç´€éŒ„</button>
      <button id="tabHistory" class="py-2 px-4 font-medium text-gray-400 hover:text-white">æ­·å²ç´€éŒ„</button>
    </nav>
    <!-- æœªæ“ä½œä¸²é—œåˆ—è¡¨ -->
    <div id="pendingSection" class="bg-gray-800 p-6 rounded-2xl shadow-lg mt-4">
      <h2 class="text-xl mb-4">å¾…æ“ä½œä¸²é—œ</h2>
      <ul id="pendingList" class="list-decimal list-inside space-y-4 text-sm"></ul>
    </div>
    <!-- å·²æ“ä½œæ­·å²ç´€éŒ„ -->
    <div id="historySection" class="hidden bg-gray-800 p-6 rounded-2xl shadow-lg mt-4">
      <h2 class="text-xl mb-4">æ­·å²ç´€éŒ„</h2>
      <ul id="historyList" class="list-decimal list-inside space-y-4 text-sm"></ul>
    </div>
  </div>

  <script>
    // æœ¬åœ°åŒ–éšŠä¼
    const teams = {"Arizona Diamondbacks":"äºåˆ©æ¡‘é‚£éŸ¿å°¾è›‡","Oakland Athletics":"é‹å‹•å®¶","Atlanta Braves":"äºç‰¹è˜­å¤§å‹‡å£«","Baltimore Orioles":"å·´çˆ¾çš„æ‘©é‡‘é¶¯","Boston Red Sox":"æ³¢å£«é “ç´…è¥ª","Chicago White Sox":"èŠåŠ å“¥ç™½è¥ª","Chicago Cubs":"èŠåŠ å“¥å°ç†Š","Cincinnati Reds":"è¾›è¾›é‚£æç´…äºº","Cleveland Guardians":"å…‹é‡Œå¤«è˜­å®ˆè­·è€…","Colorado Rockies":"ç§‘ç¾…æ‹‰å¤šè½ç£¯","Detroit Tigers":"åº•ç‰¹å¾‹è€è™","Houston Astros":"ä¼‘å£«é “å¤ªç©ºäºº","Kansas City Royals":"å ªè–©æ–¯åŸçš‡å®¶","Los Angeles Angels":"æ´›æ‰ç£¯å¤©ä½¿","Los Angeles Dodgers":"æ´›æ‰ç£¯é“å¥‡","Miami Marlins":"é‚é˜¿å¯†é¦¬æ—é­š","Milwaukee Brewers":"å¯†çˆ¾ç“¦åŸºé‡€é…’äºº","Minnesota Twins":"æ˜å°¼è˜‡é”é›™åŸ","New York Yankees":"ç´ç´„æ´‹åŸº","New York Mets":"ç´ç´„å¤§éƒ½æœƒ","Philadelphia Phillies":"è²»åŸè²»åŸäºº","Pittsburgh Pirates":"åŒ¹èŒ²å ¡æµ·ç›œ","San Diego Padres":"è–åœ°ç‰™å“¥æ•™å£«","San Francisco Giants":"èˆŠé‡‘å±±å·¨äºº","Seattle Mariners":"è¥¿é›…åœ–æ°´æ‰‹","St. Louis Cardinals":"è–è·¯æ˜“ç´…é›€","Tampa Bay Rays":"å¦å¸•ç£å…‰èŠ’","Texas Rangers":"å¾·å·éŠé¨å…µ","Toronto Blue Jays":"å¤šå€«å¤šè—é³¥","Washington Nationals":"è¯ç››é “åœ‹æ°‘"};
    // å¾ localStorage è®€å–æˆ–é è¨­
    let bankroll = parseFloat(localStorage.getItem('bankroll')) || 0;
    let parlayBets = JSON.parse(localStorage.getItem('pendingBets')) || [];
    let historyData = JSON.parse(localStorage.getItem('historyBets')) || [];
    let historyCount = historyData.length;

    // DOM
    const bankrollInput = document.getElementById('bankrollInput');
    const setBankrollBtn = document.getElementById('setBankrollBtn');
    const bankrollDisplay = document.getElementById('bankrollDisplay');
    const betForm = document.getElementById('betForm');
    const teamSelect = document.getElementById('teamSelect');
    const oddsInput = document.getElementById('oddsInput');
    const addParlayBtn = document.getElementById('addParlayBtn');
    const clearParlayBtn = document.getElementById('clearParlayBtn');
    const parlayList = document.getElementById('parlayList');
    const totalOddsDisplay = document.getElementById('totalOdds');
    const betAmountInput = document.getElementById('betAmountInput');
    const placeBetBtn = document.getElementById('placeBetBtn');
    const resultStatus = document.getElementById('resultStatus');
    const tabPending = document.getElementById('tabPending');
    const tabHistory = document.getElementById('tabHistory');
    const pendingSection = document.getElementById('pendingSection');
    const historySection = document.getElementById('historySection');
    const pendingList = document.getElementById('pendingList');
    const historyList = document.getElementById('historyList');

    // å„²å­˜æ‰€æœ‰ç‹€æ…‹
    function saveAll() {
      localStorage.setItem('bankroll', bankroll);
      localStorage.setItem('pendingBets', JSON.stringify(parlayBets));
      localStorage.setItem('historyBets', JSON.stringify(historyData));
    }

    // åˆå§‹åŒ–é¡¯ç¤º
    function init() {
      bankrollDisplay.textContent = bankroll.toFixed(2);
      // è¡¨å–®å•Ÿç”¨
      if (bankroll > 0) betForm.classList.remove('opacity-50','pointer-events-none');
      // éšŠä¼ä¸‹æ‹‰
      Object.keys(teams).forEach(key => {
        const opt = document.createElement('option'); opt.value = key; opt.textContent = teams[key]; teamSelect.append(opt);
      });
      // é‡å»ºå¾…æ“ä½œèˆ‡æ­·å²
      parlayBets.forEach(b=>addPendingEntry(b));
      historyData.forEach(h=>addHistoryEntry(h));
      updateParlayUI();
    }

    // æ›´æ–°ä¸²é—œ UI
    function updateParlayUI() {
      parlayList.innerHTML = '';
      let totalOdds = 1;
      parlayBets.forEach((b,i)=>{
        const li=document.createElement('li'); li.textContent=`${i+1}. ${teams[b.team]} @ ${b.odds.toFixed(2)}`; parlayList.append(li);
        totalOdds*=b.odds;
      });
      totalOddsDisplay.textContent = totalOdds.toFixed(2);
    }

    // æ–°å¢ Pending æ¢ç›®
    function addPendingEntry({team,odds,betAmt}) {
      const entryId = ++historyCount;
      const li=document.createElement('li'); li.id=`entry-${entryId}`;
      const details=`${teams[team]}@${odds.toFixed(2)}`;
      const totalOdds=parlayBets.reduce((acc,b)=>acc*b.odds,1);
      li.innerHTML=`<div>ã€${entryId}ã€‘${details}ï½œç¸½è³ ç‡${totalOdds.toFixed(2)}ï½œä¸‹æ³¨${betAmt.toFixed(2)}</div>
        <div class="mt-2 space-x-2">
          <button class="passBtn py-1 px-3 rounded-md bg-green-600 hover:bg-green-700">éé—œ</button>
          <button class="failBtn py-1 px-3 rounded-md bg-red-600 hover:bg-red-700">å¤±æ•—</button>
        </div>`;
      pendingList.append(li);
      bindResultButtons(li,team,odds,betAmt,entryId);
    }

    // æ–°å¢ History æ¢ç›®
    function addHistoryEntry({team,odds,betAmt,passed,id}) {
      const li=document.createElement('li'); li.id=`entry-${id}`;
      const status=passed?`ğŸ‰ éé—œ`:`ğŸ’” å¤±æ•—`;
      li.textContent=`ã€${id}ã€‘${teams[team]}@${odds.toFixed(2)}ï½œä¸‹æ³¨${betAmt.toFixed(2)}ï½œ${status}`;
      historyList.append(li);
    }

    // ç¶å®šçµæœæŒ‰éˆ•
    function bindResultButtons(li,team,odds,betAmt,id) {
      const totalOdds=parlayBets.reduce((acc,b)=>acc*b.odds,1);
      li.querySelector('.passBtn').onclick=()=>{
        bankroll+=betAmt*(totalOdds-1);
        historyData.push({team,odds,betAmt,passed:true,id});
        resultStatus.textContent=`ğŸ‰ ç¬¬${id}ç­† éé—œï¼Œæ·¨åˆ© ${(betAmt*(totalOdds-1)).toFixed(2)}`;
        finalizeEntry(li);
        saveAll();
      };
      li.querySelector('.failBtn').onclick=()=>{
        bankroll-=betAmt;
        historyData.push({team,odds,betAmt,passed:false,id});
        resultStatus.textContent=`ğŸ’” ç¬¬${id}ç­† å¤±æ•—ï¼Œæå¤± ${betAmt.toFixed(2)}`;
        finalizeEntry(li);
        saveAll();
      };
    }

    // ç§»é™¤æŒ‰éˆ•ä¸¦ç§»è‡³ History
    function finalizeEntry(li) {
      li.querySelector('.passBtn')?.remove(); li.querySelector('.failBtn')?.remove();
      bankrollDisplay.textContent=bankroll.toFixed(2);
      historyList.append(li);
      // åŒæ­¥ pendingBets
      parlayBets=[]; updateParlayUI(); saveAll();
    }

    // äº‹ä»¶ç¶å®š
    setBankrollBtn.onclick=()=>{ bankroll=parseFloat(bankrollInput.value)||0; bankrollDisplay.textContent=bankroll.toFixed(2); saveAll(); betForm.classList.remove('opacity-50','pointer-events-none'); };
    addParlayBtn.onclick=()=>{ const team=teamSelect.value,odds=parseFloat(oddsInput.value); if(team&&odds){ parlayBets.push({team,odds,betAmt:0}); updateParlayUI(); saveAll(); }};
    clearParlayBtn.onclick=()=>{ parlayBets=[]; updateParlayUI(); saveAll(); };
    placeBetBtn.onclick=()=>{ const betAmt=parseFloat(betAmountInput.value)||0; if(betAmt>bankroll||parlayBets.length===0){ alert('è«‹ç¢ºèªæœ¬é‡‘èˆ‡ä¸²é—œ');return;} // è¨­å®š betAmt
      parlayBets.forEach(b=>b.betAmt=betAmt);
      addPendingEntry(parlayBets[parlayBets.length-1]);
      saveAll();
    };
    tabPending.onclick=()=>{ pendingSection.classList.remove('hidden');historySection.classList.add('hidden'); tabPending.classList.add('border-yellow-500'); tabHistory.classList.remove('border-yellow-500'); };
    tabHistory.onclick=()=>{ pendingSection.classList.add('hidden');historySection.classList.remove('hidden'); tabHistory.classList.add('border-yellow-500'); tabPending.classList.remove('border-yellow-500'); };

    // å•Ÿå‹•
    init();
  </script>
</body>
</html>
